# 9.5 –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞–º—ã–∫–∞–Ω–∏—è
""""""
# https://stepik.org/lesson/651459/step/1?unit=648165


"""   *   *   *   Task   *   *   *   """


#  9.5-1
"""
–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é power(), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç:
degree ‚Äî —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
–§—É–Ω–∫—Ü–∏—è power() –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ x 
–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ x –≤ —Å—Ç–µ–ø–µ–Ω–∏ degree
"""
def power(degree):
    def inner(x):
        return x ** degree
    return inner

square = power(2)
print(square(5))  # 25

print(power(3)(3))  # 27

result = power(4)(2)
print(result)  # 16


#  9.5-2
"""
–§—É–Ω–∫—Ü–∏—è generator_square_polynom()
—Å–µ–º–µ–π—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π ‚Äî –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Ç—Ä–µ—Ö—á–ª–µ–Ω–æ–≤:
f(x) = ùëéùë•^2 + ùëèùë• + ùëê

–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é generator_square_polynom(), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:
a ‚Äî –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 
b ‚Äî –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 
c ‚Äî –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 

–§—É–Ω–∫—Ü–∏—è generator_square_polynom() –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, 
–∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ x 
–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è ùëéùë•^2 + ùëèùë• + ùëê
"""
def generator_square_polynom(a, b, c):
    def inner(x):
        return a * x**2 + b * x + c
    return inner

f = generator_square_polynom(1, 2, 1)
print(f(5))  # 36

print(generator_square_polynom(9, 52, 64)(8))  # 1056


#  9.5-3
"""
–°—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ (query string) ‚Äî —á–∞—Å—Ç—å URL –∞–¥—Ä–µ—Å–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∫–ª—é—á–∏ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è:
https://beegeek.ru?name=timur&color=green
–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é sourcetemplate(), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç:
url ‚Äî URL –∞–¥—Ä–µ—Å
–§—É–Ω–∫—Ü–∏—è sourcetemplate() –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, 
–∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç url –∞–¥—Ä–µ—Å, 
–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Å–æ —Å—Ç—Ä–æ–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞, —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. 
–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π url –∞–¥—Ä–µ—Å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Å—Ç—Ä–æ–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –∫–ª—é—á–µ–π.
"""
def sourcetemplate(url):
    def inner(**kwargs):
        if kwargs:
            res = [f'{k}={v}' for k, v in sorted(kwargs.items())]
            return f"{url}?{'&'.join(res)}"
        return url
    return inner


url = 'https://stepik.org/lesson/651459/step/14'
load = sourcetemplate(url)
print(load(thread='solutions', unit=648165))
# https://stepik.org/lesson/651459/step/14?thread=solutions&unit=648165

url = 'https://beegeek.ru';
load = sourcetemplate(url)
print(load())  # https://beegeek.ru


#  9.5-4
"""
–§—É–Ω–∫—Ü–∏—è date_formatter()
https://stepik.org/lesson/651459/step/19?unit=648165

–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é date_formatter(), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç:
country_code ‚Äî –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã
–§—É–Ω–∫—Ü–∏—è date_formatter() –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, 
–∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –¥–∞—Ç—É (—Ç–∏–ø date) 
–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –¥–∞–Ω–Ω–æ–π –¥–∞—Ç–æ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å—Ç—Ä–∞–Ω—ã —Å –∫–æ–¥–æ–º country_code.
"""
from datetime import date

def date_formatter(code: str):
    dt = {'ru': '%d.%m.%Y',
          'us': '%m-%d-%Y',
          'ca': '%Y-%m-%d',
          'br': '%d/%m/%Y',
          'fr': '%d.%m.%Y',
          'pt': '%d-%m-%Y'}

    def inner(data: date):
        return data.strftime(dt[code])

    return inner


date_ru = date_formatter('ru')
today = date(2022, 1, 25)
print(date_ru(today))  # 25.01.2022


#  9.5-5
"""
–§—É–Ω–∫—Ü–∏—è sort_priority() üå∂Ô∏è
https://stepik.org/lesson/651459/step/20?unit=648165
–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é sort_priority(), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:
values ‚Äî —Å–ø–∏—Å–æ–∫ —á–∏—Å–µ–ª
group ‚Äî —Å–ø–∏—Å–æ–∫, –∫–æ—Ä—Ç–µ–∂ –∏–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —á–∏—Å–µ–ª
–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–µ—É–±—ã–≤–∞–Ω–∏—é —Å–ø–∏—Å–æ–∫ —á–∏—Å–µ–ª values, 
–¥–µ–ª–∞—è –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø—É —á–∏—Å–µ–ª –∏–∑ group, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–µ—Ä–≤–æ–π.
"""
# –•–æ—Ä–æ—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ
# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–≤—É—Ö –º–∞—Å—Å–∏–≤–æ–≤ –¥–∞–Ω–Ω—ã—Ö
def sort_priority(values, group):
    values.sort(key=lambda el: (el not in group, el))

# –û–±—ã—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
def sort_priority(values: list, group):
    head = sorted(el for el in group if el in values)
    tail = sorted(set(values) - set(head))
    values.clear()
    values.extend(head + tail)


numbers = [150, 200, 300, 1000, 50, 20000]
sort_priority(numbers, [300, 100, 200])
print(numbers)  # [200, 300, 50, 150, 1000, 20000]

numbers = [8, 3, 1, 2, 5, 4, 7, 6]
group = {5, 7, 2, 3}
sort_priority(numbers, group)
print(numbers)   # [2, 3, 5, 7, 1, 4, 6, 8]

numbers = [9, 8, 7, 6, 5, 4, 3, 2, 1]
sort_priority(numbers, (300, 100, 200))
print(numbers)  # [1, 2, 3, 4, 5, 6, 7, 8, 9]
